---
title: Try Hack Me - ccpentesting
layout: post
category: writeup
---

# Pentesting Crash Course
The [Pentesting Crash Course](https://tryhackme.com/room/ccpentesting) room on [Try Hack Me](https://tryhackme.com/) is a great place to start learning about common tools and methodologies used in penetration testing.  
<br/>

This write up documents the process of rooting the "final exam" machine that is presented as the last task in the room.  
<br/>

## ping
THM is different than HTB. Instead of one box geting constantly reset, THM boxes are spun up just for you!  This being the case, boxes can sometimes take a minute or two to come up.  We can monitor the upstate of the box with ping.  
<br/>
<img src="../assets/img/thm/ccpentest/ping.png">
<br/>

## Enumeration
### nmap
```sh
nmap -A -T4 --open --top-ports 1000 -sV -oN nmap.out 10.10.125.198
```
<br/>
<img src="../assets/img/thm/ccpentest/nmap.png">
<br/>

<br/>
Looks like ssh and Apache.  We could try and brute force ssh with hydra, but this was not covered in the crash course.  What was covered was ~~dirbuster~~ gobuster.
<br/>

## GoBuster
<br/>
<img src="../assets/img/thm/ccpentest/gobuster1.png">
<br/>

<br/> GoBuster has shown us there is a `/secret` page we can visit, but when we navigate there in chrome it is an empty body. We can tell at the very least that secret is a directory, so lets gobuster it again.  
<br/>
<img src="../assets/img/thm/ccpentest/gobuster2.png">
<br/>

<br/> Hmm nothing, lets check for files with `.txt` extensions.
<br/>
<img src="../assets/img/thm/ccpentest/gobuster3.png">
<br/>

<br/> Read the contents of `secret.txt` with a browser or cURL, and use the credentials to connect to ssh.
<br/><img src="../assets/img/thm/ccpentest/curlsecret.png"><br/>
<br/><img src="../assets/img/thm/ccpentest/sshnyan1.png"><br/>

## Hashed?
### hashID
<br/> Run the hash through hashid to see what kind of hash it is.  Use the `-m` flag to see the correlating hashcat mode
<br/><img src="../assets/img/thm/ccpentest/hashid.png"><br/>

### hashcat
<br/> hashid thinks it is most likely a SHA1 hash.  Crack the hash with hashcat using the mode provided by hashid.  
<br/><img src="../assets/img/thm/ccpentest/hashcat.png"><br/>

### ssh
<br/> Connect with the cracked credentials and you'll find the user flag in nyan's home directory.
<br/><img src="../assets/img/thm/ccpentest/userflag.png"><br/>

## PrivEsc
```sh
sudo -l
```
<br/> Check the users sudo privileges. 
<br/><img src="../assets/img/thm/ccpentest/sudolist.png"><br/>

<br/> You should know what to do from here...
<br/><img src="../assets/img/thm/ccpentest/rootflag.png"><br/>
